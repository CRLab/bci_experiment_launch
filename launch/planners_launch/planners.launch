<launch>

    <arg name="graspit_url" default="picard.cs.columbia.edu" />
    <arg name="use_robot_hw" default="False" />
    <arg name="use_filtered_pointcloud_topic" default="False" />
    <arg name="use_moveit" default="True"/>
    <arg name="use_mico" default="False" />
    <arg name="graspit_display" default="0.0" />
    <arg name="remote_launch_graspit" default="true" />
    <arg name="graspit_user" default="jweisz" />
    <arg name="graspit_remote_bin" default="graspit"/>

    <param name="use_robot_hw" value="$(arg use_robot_hw)" />
    <param name="graspit_pointcloud_topic" value="/filtered_pc" if="$(arg use_filtered_pointcloud_topic)" />
    <param name="graspit_pointcloud_topic" value="/camera/depth_registered/points" unless="$(arg use_filtered_pointcloud_topic)" />
    <param name="/table_world_x_offset" value="0.7" if="$(arg use_mico)"/>
    <param name="/table_world_y_offset" value="-0.3" if="$(arg use_mico)"/>


    <node name="graspit_proto_server" pkg="graspit_python_node" type="graspit_ros_pointcloud_relay.py">
    	  <param name="graspit_url" value="$(arg graspit_url)" />
    </node>


    <group if="$(arg use_moveit)" >
        <group unless="$(arg use_mico)">
            <rosparam param="home_joint_values">[0,0,0,0,0,0]</rosparam>
	        <include file="$(find staubli_barretthand_moveit_config)/launch/staubli_bhand_rviz_interface.launch">
    		     <arg name="fake_execution" value="true" unless="$(arg use_robot_hw)"/>
		     <arg name="fake_execution" value="false" if="$(arg use_robot_hw)"/>

		 </include>
         </group>

	 <group if="$(arg use_mico)">         
	 	 <rosparam param="home_joint_values">[-1.6535711019001942, -1.6583837003060768, 0.20308707209116691, -1.1078872640140502, 1.6588560119254023, 3.39863243]</rosparam>

		 <include file="$(find mico_moveit_config)/launch/mico_moveit.launch"/>
	 </group>

        <include file="$(find moveit_trajectory_planner)/launch/moveit_trajectory_planner.launch">
	  <arg name="hand_name" value="mico" if="$(arg use_mico)" />
	  <arg name="hand_name" value="barrett" unless="$(arg use_mico)" />
        </include>
	  
    </group>

    <group unless="$(arg use_moveit)">
        <!-- launch openrave planner here -->
    </group>

    <group if="$(arg remote_launch_graspit)">
      <node name="graspit_remote" pkg="graspit_python_node" type="remote_launch.py">
	<param name="graspit_ssh_url" value="$(arg graspit_user)@$(arg graspit_url)"/>
	<param name="graspit_display" value=":$(arg graspit_display)" />	   	
	<param name="graspit_world" value="3objectmico" if="$(arg use_mico)" />
	<param name="graspit_world" value="3objectbarrett" unless="$(arg use_mico)" />
        <param name="graspit_remote_bin" value="$(arg graspit_remote_bin)" />

      </node>
    </group>


</launch>
